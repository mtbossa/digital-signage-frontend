<article>
  <h1>Criar Post</h1>
  <div class="tui-container">
    <form [formGroup]="postForm" (ngSubmit)="onSubmit()">
      <div class="tui-row tui-row_sme">
        <div class="tui-col_8">
          <h3 class="tui-form__header tui-form__header_margin-top_none">Informações</h3>
          <div class="tui-form__row">
            <tui-input
              tuiTextfieldExampleText="Descrição do post"
              formControlName="description"
            >
              Descrição
              <span class="tui-required"></span>
            </tui-input>
            <tui-error
              formControlName="description"
              [error]="[] | tuiFieldError | async"
            ></tui-error>
          </div>
          <h3 class="tui-form__header tui-form__header_margin-top_1">Agendamento</h3>
          <!-- Start and end date -->
          <div class="tui-form__row tui-form__row_multi-fields">
            <div class="tui-form__multi-field">
              <tui-input-date [min]="minStartDate" formControlName="start_date">
                Data de início
              </tui-input-date>
              <tui-error
                formControlName="start_date"
                [error]="[] | tuiFieldError | async"
              ></tui-error>
            </div>
            <div class="tui-form__multi-field">
              <tui-input-date [min]="getMinEndDate()" formControlName="end_date">
                Data de fim
              </tui-input-date>
              <tui-error
                formControlName="end_date"
                [error]="[] | tuiFieldError | async"
              ></tui-error>
            </div>
          </div>
          <!-- Start and end time -->
          <div class="tui-form__row tui-form__row_multi-fields">
            <div class="tui-form__multi-field">
              <tui-input-time formControlName="start_time">Hora de início</tui-input-time>
              <tui-error
                formControlName="start_time"
                [error]="[] | tuiFieldError | async"
              ></tui-error>
            </div>
            <div class="tui-form__multi-field">
              <tui-input-time formControlName="end_time">Hora de fim</tui-input-time>
              <tui-error
                formControlName="end_time"
                [error]="[] | tuiFieldError | async"
              ></tui-error>
            </div>
          </div>

          <!-- Media -->
          <h3 class="tui-form__header tui-form__header_margin-top_1">Mídia</h3>
          <div class="tui-form__row">
            <tui-select
              *tuiLet="medias$ | async as items"
              class="b-form"
              [tuiTextfieldLabelOutside]="true"
              [valueContent]="items ? stringify(items) : loading"
              formControlName="media_id"
            >
              Selecione a mídia
              <ng-template tuiDataList>
                <tui-data-list *ngIf="items; else loading">
                  <button *ngFor="let item of items" tuiOption [value]="item.id">
                    {{ item.description }}
                  </button>
                </tui-data-list>
              </ng-template>
              <ng-template #loading>
                <tui-loader class="tui-space_vertical-3 loader"></tui-loader>
              </ng-template>
            </tui-select>
          </div>

          <div class="tui-form__buttons">
            <button
              tuiButton
              size="l"
              type="submit"
              class="tui-form__button"
              [disabled]="formDisabled"
            >
              Submit
            </button>
          </div>
        </div>
      </div>
    </form>
  </div>
</article>
